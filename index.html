<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Load Data in SQLite from Tabular Files • RSQLite.toolkit</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="96x96" href="favicon-96x96.png">
<link rel="icon" type="”image/svg+xml”" href="favicon.svg">
<link rel="apple-touch-icon" sizes="180x180" href="apple-touch-icon.png">
<link rel="icon" sizes="any" href="favicon.ico">
<link rel="manifest" href="site.webmanifest">
<script src="deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet">
<link href="deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet">
<script src="deps/headroom-0.11.0/headroom.min.js"></script><script src="deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="deps/search-1.0.0/fuse.min.js"></script><script src="deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="pkgdown.js"></script><meta property="og:title" content="Load Data in SQLite from Tabular Files">
<meta name="description" content="A lightweight wrapper around the RSQLite package for streamlined loading of data from tabular files (i,e. text delimited files like CSV and TSV, Microsoft Excel, and Arrow IPC files) in SQLite databases. Includes helper functions for inspecting the structure of the input files, and some functions to simplify activities on the SQLite tables.">
<meta property="og:description" content="A lightweight wrapper around the RSQLite package for streamlined loading of data from tabular files (i,e. text delimited files like CSV and TSV, Microsoft Excel, and Arrow IPC files) in SQLite databases. Includes helper functions for inspecting the structure of the input files, and some functions to simplify activities on the SQLite tables.">
<meta property="og:image" content="https://fab-algo.github.io/RSQLite.toolkit/logo.png">
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="index.html">RSQLite.toolkit</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.0.4</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item"><a class="nav-link" href="reference/index.html">Reference</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles">
<li><a class="dropdown-item" href="articles/dealing_with_DSV_files.html">Dealing with DSV files</a></li>
  </ul>
</li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="search.json">
</form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/fab-algo/RSQLite.toolkit/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul>
</div>


  </div>
</nav><div class="container template-home">
<div class="row">
  <main id="main" class="col-md-9"><div class="section level1">
<div class="page-header">
<img src="logo.png" class="logo" alt=""><h1 id="rsqlitetoolkit-">RSQLite.toolkit 
<a class="anchor" aria-label="anchor" href="#rsqlitetoolkit-"></a>
</h1>
</div>
<!-- badges: start -->
<!-- badges: end -->
<p>RSQLite.toolkit is a lightweight wrapper around the RSQLite package for streamlined loading of data from <strong>tabular files</strong> (i.e. text delimited files like CSV and TSV, Microsoft Excel, and Arrow IPC files) in SQLite databases.</p>
<p>It also includes helper functions for inspecting the structure of the input files, and some functions to simplify activities on the SQLite tables.</p>
<div class="section level2">
<h2 id="installation">Installation<a class="anchor" aria-label="anchor" href="#installation"></a>
</h2>
<p>You can install the development version of RSQLite.toolkit from <a href="https://github.com/" class="external-link">GitHub</a> with:</p>
<div class=".pkgdown-devel">
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Install development version from GitHub</span></span>
<span><span class="co"># install.packages("pak")</span></span>
<span><span class="fu">pak</span><span class="fu">::</span><span class="fu"><a href="https://pak.r-lib.org/reference/pak.html" class="external-link">pak</a></span><span class="op">(</span><span class="st">"fab-algo/RSQLite.toolkit"</span><span class="op">)</span></span></code></pre></div>
</div>
</div>
<div class="section level2">
<h2 id="usage">Usage<a class="anchor" aria-label="anchor" href="#usage"></a>
</h2>
<p>These basic examples show how to use the core functions of the package to load example data in different tables in a test database:</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/fab-algo/RSQLite.toolkit" class="external-link">RSQLite.toolkit</a></span><span class="op">)</span></span>
<span><span class="co">#&gt; Loading required package: RSQLite</span></span>
<span></span>
<span><span class="va">dbcon</span> <span class="op">&lt;-</span> <span class="fu">dbConnect</span><span class="op">(</span><span class="fu">RSQLite</span><span class="fu">::</span><span class="fu"><a href="https://rsqlite.r-dbi.org/reference/SQLite.html" class="external-link">SQLite</a></span><span class="op">(</span><span class="op">)</span>, <span class="fu"><a href="https://rdrr.io/r/base/file.path.html" class="external-link">file.path</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/tempfile.html" class="external-link">tempdir</a></span><span class="op">(</span><span class="op">)</span>, <span class="st">"tests.sqlite"</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="va">data_path</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/system.file.html" class="external-link">system.file</a></span><span class="op">(</span><span class="st">"extdata"</span>, package <span class="op">=</span> <span class="st">"RSQLite.toolkit"</span><span class="op">)</span></span>
<span></span>
<span><span class="co">## creates the table ABALONE from a CSV file, adding the field 'SEQ' with the</span></span>
<span><span class="co">## ROWID of each record through the use of the parameter 'auto_pk=TRUE'</span></span>
<span><span class="fu"><a href="reference/dbTableFromDSV.html">dbTableFromDSV</a></span><span class="op">(</span>input_file <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/file.path.html" class="external-link">file.path</a></span><span class="op">(</span><span class="va">data_path</span>, <span class="st">"abalone.csv"</span><span class="op">)</span>,</span>
<span>               dbcon <span class="op">=</span> <span class="va">dbcon</span>, table_name <span class="op">=</span> <span class="st">"ABALONE"</span>,</span>
<span>               drop_table <span class="op">=</span> <span class="cn">TRUE</span>, auto_pk <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>               header <span class="op">=</span> <span class="cn">TRUE</span>, sep <span class="op">=</span> <span class="st">","</span>, dec <span class="op">=</span> <span class="st">"."</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] 4177</span></span>
<span></span>
<span><span class="co">## creates the table PORTFOLIO_PERF from Excel file, using the "all period" sheet</span></span>
<span><span class="fu"><a href="reference/dbTableFromXlsx.html">dbTableFromXlsx</a></span><span class="op">(</span>input_file <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/file.path.html" class="external-link">file.path</a></span><span class="op">(</span><span class="va">data_path</span>,</span>
<span>                                       <span class="st">"stock_portfolio.xlsx"</span><span class="op">)</span>,</span>
<span>                dbcon <span class="op">=</span> <span class="va">dbcon</span>, table_name <span class="op">=</span> <span class="st">"PORTFOLIO_PERF"</span>,</span>
<span>                drop_table <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>                sheet_name <span class="op">=</span> <span class="st">"all period"</span>, first_row <span class="op">=</span> <span class="fl">2</span>, cols_range <span class="op">=</span> <span class="st">"A:S"</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] 63</span></span>
<span></span>
<span><span class="co">## creates the table PENGUINS from Feather file</span></span>
<span><span class="fu"><a href="reference/dbTableFromFeather.html">dbTableFromFeather</a></span><span class="op">(</span>input_file <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/file.path.html" class="external-link">file.path</a></span><span class="op">(</span><span class="va">data_path</span>, <span class="st">"penguins.feather"</span><span class="op">)</span>,</span>
<span>                   dbcon <span class="op">=</span> <span class="va">dbcon</span>, table_name <span class="op">=</span> <span class="st">"PENGUINS"</span>,</span>
<span>                   drop_table <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] 333</span></span>
<span></span>
<span><span class="fu">dbListTables</span><span class="op">(</span><span class="va">dbcon</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] "ABALONE"        "PENGUINS"       "PORTFOLIO_PERF"</span></span>
<span></span>
<span><span class="fu">dbListFields</span><span class="op">(</span><span class="va">dbcon</span>, <span class="st">"ABALONE"</span><span class="op">)</span></span>
<span><span class="co">#&gt;  [1] "Sex"     "Length"  "Diam"    "Height"  "Whole"   "Shucked" "Viscera"</span></span>
<span><span class="co">#&gt;  [8] "Shell"   "Rings"   "SEQ"</span></span>
<span><span class="fu">dbListFields</span><span class="op">(</span><span class="va">dbcon</span>, <span class="st">"PENGUINS"</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] "species"           "culmen_length_mm"  "culmen_depth_mm"  </span></span>
<span><span class="co">#&gt; [4] "flipper_length_mm" "body_mass_g"       "sex"</span></span>
<span><span class="fu">dbListFields</span><span class="op">(</span><span class="va">dbcon</span>, <span class="st">"PORTFOLIO_PERF"</span><span class="op">)</span><span class="op">[</span><span class="fl">1</span><span class="op">:</span><span class="fl">5</span><span class="op">]</span></span>
<span><span class="co">#&gt; [1] "ID"                                   </span></span>
<span><span class="co">#&gt; [2] "Large_B_P"                            </span></span>
<span><span class="co">#&gt; [3] "Large_ROE"                            </span></span>
<span><span class="co">#&gt; [4] "Large_S_P"                            </span></span>
<span><span class="co">#&gt; [5] "Large_Return_Rate_in_the_last_quarter"</span></span>
<span></span>
<span><span class="fu">dbDisconnect</span><span class="op">(</span><span class="va">dbcon</span><span class="op">)</span></span></code></pre></div>
<p>To inspect the structure of the input files, you can use the following functions:</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/fab-algo/RSQLite.toolkit" class="external-link">RSQLite.toolkit</a></span><span class="op">)</span></span>
<span></span>
<span><span class="va">data_path</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/system.file.html" class="external-link">system.file</a></span><span class="op">(</span><span class="st">"extdata"</span>, package <span class="op">=</span> <span class="st">"RSQLite.toolkit"</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="reference/file_schema_dsv.html">file_schema_dsv</a></span><span class="op">(</span>input_file <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/file.path.html" class="external-link">file.path</a></span><span class="op">(</span><span class="va">data_path</span>, <span class="st">"abalone.csv"</span><span class="op">)</span>,</span>
<span>                header <span class="op">=</span> <span class="cn">TRUE</span>, sep <span class="op">=</span> <span class="st">","</span>, dec <span class="op">=</span> <span class="st">"."</span><span class="op">)</span><span class="op">$</span><span class="va">schema</span><span class="op">[</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">3</span><span class="op">:</span><span class="fl">7</span><span class="op">)</span><span class="op">]</span></span>
<span><span class="co">#&gt;   col_names col_types sql_types src_names src_types src_is_quoted</span></span>
<span><span class="co">#&gt; 1       Sex character      TEXT       Sex      text         FALSE</span></span>
<span><span class="co">#&gt; 2    Length   numeric      REAL    Length      text         FALSE</span></span>
<span><span class="co">#&gt; 3      Diam   numeric      REAL      Diam      text         FALSE</span></span>
<span><span class="co">#&gt; 4    Height   numeric      REAL    Height      text         FALSE</span></span>
<span><span class="co">#&gt; 5     Whole   numeric      REAL     Whole      text         FALSE</span></span>
<span><span class="co">#&gt; 6   Shucked   numeric      REAL   Shucked      text         FALSE</span></span>
<span><span class="co">#&gt; 7   Viscera   numeric      REAL   Viscera      text         FALSE</span></span>
<span><span class="co">#&gt; 8     Shell   numeric      REAL     Shell      text         FALSE</span></span>
<span><span class="co">#&gt; 9     Rings   integer   INTEGER     Rings      text         FALSE</span></span>
<span></span>
<span><span class="fu"><a href="reference/file_schema_feather.html">file_schema_feather</a></span><span class="op">(</span>input_file <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/file.path.html" class="external-link">file.path</a></span><span class="op">(</span><span class="va">data_path</span>,</span>
<span>                                           <span class="st">"penguins.feather"</span><span class="op">)</span><span class="op">)</span><span class="op">[</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">3</span><span class="op">:</span><span class="fl">6</span><span class="op">)</span><span class="op">]</span></span>
<span><span class="co">#&gt;           col_names col_types sql_types         src_names src_types</span></span>
<span><span class="co">#&gt; 1           species character      TEXT           species      utf8</span></span>
<span><span class="co">#&gt; 2  culmen_length_mm    double      REAL  culmen_length_mm    double</span></span>
<span><span class="co">#&gt; 3   culmen_depth_mm    double      REAL   culmen_depth_mm    double</span></span>
<span><span class="co">#&gt; 4 flipper_length_mm    double      REAL flipper_length_mm    double</span></span>
<span><span class="co">#&gt; 5       body_mass_g    double      REAL       body_mass_g    double</span></span>
<span><span class="co">#&gt; 6               sex character      TEXT               sex      utf8</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="description">Description<a class="anchor" aria-label="anchor" href="#description"></a>
</h2>
<p>The basic idea behind this package is that storing all the data used throughout a data‑analysis workflow in a local database is a highly efficient and effective way to manage information. The advantages of keeping raw data and their metadata together in the same database—ideally under a shared data model—far outweigh not only the additional overhead of maintaining a structured system, but also the costs and complexity involved in importing information from external files with disparate formats and conventions.</p>
<p>The purpose of this package is to reduce the burden of the last point (i.e., importing the data) as much as possible, through a set of functions that read the data from the source files, create the destination table (if it does not exist), store the data there and index it, all in one step.</p>
<p>The core functions of the package are therefore those that can be used to move data from a file to a database table:</p>
<ul>
<li><code><a href="reference/dbTableFromDSV.html">dbTableFromDSV()</a></code></li>
<li><code><a href="reference/dbTableFromXlsx.html">dbTableFromXlsx()</a></code></li>
<li><code><a href="reference/dbTableFromFeather.html">dbTableFromFeather()</a></code></li>
</ul>
<p>Together with these, there are a couple of additional functions:</p>
<ul>
<li><code><a href="reference/dbTableFromDataFrame.html">dbTableFromDataFrame()</a></code></li>
<li><code><a href="reference/dbTableFromView.html">dbTableFromView()</a></code></li>
</ul>
<p>that could be handy to move data from intermediate data structures to database tables, using the same logic of the core ones.</p>
<p>All these functions share a common calling template that is outlined in the following picture:</p>
<p><img src="reference/figures/README-dbTableFrom_template.png" alt="" width="100%" style="display: block; margin: auto;"></p>
<p>All core functions require three mandatory arguments:</p>
<ul>
<li><code>input_file</code></li>
<li><code>dbcon</code></li>
<li><code>table_name</code></li>
</ul>
<p>that have no default values. The <code><a href="reference/dbTableFromXlsx.html">dbTableFromXlsx()</a></code> requires three additional arguments (again with no defaults): <code>sheet_name</code>, <code>first_row</code>, <code>cols_range</code> that are needed to correctly locate the dataset to be imported inside the Excel file.</p>
<p>More details on the parameters and functions’ behaviour are available in the standard function documentation accessible through R’s help system.</p>
<p>Anyway, be careful with default values of all other arguments, especially when importing from <em>delimiter separated values</em> text files: the default values for input data interpretation arguments are seldom the right ones. This is also true for the default values of the functions actually used by this package to read data from files, that is:</p>
<ul>
<li>
<code><a href="https://rdrr.io/r/base/scan.html" class="external-link">base::scan()</a></code> for reading from DSV files;</li>
<li>
<code><a href="https://janmarvin.github.io/openxlsx2/reference/wb_to_df.html" class="external-link">openxlsx2::wb_to_df()</a></code> for reading from Xlsx files;</li>
<li>
<code><a href="https://arrow.apache.org/docs/r/reference/FeatherReader.html" class="external-link">arrow::FeatherReader()</a></code> for reading from Feather files.</li>
</ul>
<p>Given the high variability in how data can be stored in DSV and Excel files, there is always the possibility of passing specific parameters of the above listed functions through the special argument “<code>...</code>”. To help with using the additional arguments of <code><a href="reference/dbTableFromDSV.html">dbTableFromDSV()</a></code>, along with those of <code><a href="https://rdrr.io/r/base/scan.html" class="external-link">base::scan()</a></code>, you can read the <strong>vignette “Dealing with DSV files”</strong> that is part of this package. The first section of the document describes how to use <code><a href="https://rdrr.io/r/base/scan.html" class="external-link">base::scan()</a></code> arguments to read complex DSV files. In the second section there is a detailed description of the issues related to the column names used in the data file and their corresponding identifiers in the SQLite table’s fields. The second section of this vignette can be helpful also when importing data from Xlsx and Feather files.</p>
</div>
<div class="section level2">
<h2 id="data-sources">Data sources<a class="anchor" aria-label="anchor" href="#data-sources"></a>
</h2>
<p>The example datasets, included in the <code>extdata</code> package directory, have been retrieved from the following sources:</p>
<ul>
<li>
<code>"abalone.csv"</code>: Predicting the age of abalone from physical measurements. Source link: <a href="https://archive.ics.uci.edu/dataset/1/abalone" class="external-link uri">https://archive.ics.uci.edu/dataset/1/abalone</a>
</li>
<li>
<code>"stock_portfolio.xlsx"</code>: Stock portfolio performance under a new weighted scoring stock selection model. Source link: <a href="https://archive.ics.uci.edu/dataset/390/stock+portfolio+performance" class="external-link uri">https://archive.ics.uci.edu/dataset/390/stock+portfolio+performance</a>
</li>
<li>
<code>"penguins.feather"</code>: The Palmer Archipelago’s penguins data set. Source link: <a href="https://allisonhorst.github.io/palmerpenguins/" class="external-link uri">https://allisonhorst.github.io/palmerpenguins/</a>. The “feather” file format of the dataset was downloaded from <a href="https://github.com/lmassaron/datasets" class="external-link uri">https://github.com/lmassaron/datasets</a>.</li>
</ul>
</div>
</div>
  </main><aside class="col-md-3"><div class="links">
<h2 data-toc-skip>Links</h2>
<ul class="list-unstyled">
<li><a href="https://github.com/fab-algo/RSQLite.toolkit/" class="external-link">Browse source code</a></li>
<li><a href="https://github.com/fab-algo/RSQLite.toolkit/issues" class="external-link">Report a bug</a></li>
</ul>
</div>

<div class="license">
<h2 data-toc-skip>License</h2>
<ul class="list-unstyled">
<li><a href="LICENSE.html">Full license</a></li>
<li><small>GPL (&gt;= 3)</small></li>
</ul>
</div>


<div class="citation">
<h2 data-toc-skip>Citation</h2>
<ul class="list-unstyled">
<li><a href="authors.html#citation">Citing RSQLite.toolkit</a></li>
</ul>
</div>

<div class="developers">
<h2 data-toc-skip>Developers</h2>
<ul class="list-unstyled">
<li>Ludovico G. Beretta <br><small class="roles"> Author, maintainer, copyright holder </small>   </li>
</ul>
</div>



  </aside>
</div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Ludovico G. Beretta.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.2.0.</p>
</div>

    </footer>
</div>





  </body>
</html>
