<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Preview the table structure contained in a DSV file. — file_schema_dsv • RSQLite.toolkit</title><!-- favicons --><link rel="icon" type="image/png" sizes="96x96" href="../favicon-96x96.png"><link rel="icon" type="”image/svg+xml”" href="../favicon.svg"><link rel="apple-touch-icon" sizes="180x180" href="../apple-touch-icon.png"><link rel="icon" sizes="any" href="../favicon.ico"><link rel="manifest" href="../site.webmanifest"><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Preview the table structure contained in a DSV file. — file_schema_dsv"><meta name="description" content="The file_schema_dsv() function returns a data frame with the schema
of a DSV file reading only the first max_lines of a delimiter
separated values (DSV) text file to infer column names and data types
(it does not read the full dataset into memory). Then it converts them
to the candidate data frame columns' names and data types."><meta property="og:description" content="The file_schema_dsv() function returns a data frame with the schema
of a DSV file reading only the first max_lines of a delimiter
separated values (DSV) text file to infer column names and data types
(it does not read the full dataset into memory). Then it converts them
to the candidate data frame columns' names and data types."><meta property="og:image" content="https://fab-algo.github.io/RSQLite.toolkit/logo.png"></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">RSQLite.toolkit</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.1.0.9010</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles"><li><a class="dropdown-item" href="../articles/dealing_with_DSV_files.html">Dealing with DSV files</a></li>
  </ul></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/fab-algo/RSQLite.toolkit/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>Preview the table structure contained in a DSV file.</h1>
      <small class="dont-index">Source: <a href="https://github.com/fab-algo/RSQLite.toolkit/blob/master/R/file_helpers.R" class="external-link"><code>R/file_helpers.R</code></a></small>
      <div class="d-none name"><code>file_schema_dsv.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>The <code>file_schema_dsv()</code> function returns a data frame with the schema
of a DSV file reading only the first <code>max_lines</code> of a delimiter
separated values (DSV) text file to infer column names and data types
(it does not read the full dataset into memory). Then it converts them
to the candidate data frame columns' names and data types.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">file_schema_dsv</span><span class="op">(</span></span>
<span>  <span class="va">input_file</span>,</span>
<span>  header <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  sep <span class="op">=</span> <span class="st">","</span>,</span>
<span>  dec <span class="op">=</span> <span class="st">"."</span>,</span>
<span>  grp <span class="op">=</span> <span class="st">""</span>,</span>
<span>  id_quote_method <span class="op">=</span> <span class="st">"DB_NAMES"</span>,</span>
<span>  max_lines <span class="op">=</span> <span class="fl">2000</span>,</span>
<span>  null_columns <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  force_num_cols <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  <span class="va">...</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-input-file">input_file<a class="anchor" aria-label="anchor" href="#arg-input-file"></a></dt>
<dd><p>character, file name (including path) to be read.</p></dd>


<dt id="arg-header">header<a class="anchor" aria-label="anchor" href="#arg-header"></a></dt>
<dd><p>logical, if <code>TRUE</code> the first line contains the fields'
names. If <code>FALSE</code>, the column names will be formed sing a "V"
followed by the column number (as specified in <code><a href="https://rdrr.io/r/utils/read.table.html" class="external-link">utils::read.table()</a></code>).</p></dd>


<dt id="arg-sep">sep<a class="anchor" aria-label="anchor" href="#arg-sep"></a></dt>
<dd><p>character, field delimiter (e.g., "," for CSV, "\t" for TSV)
in the input file. Defaults to ",".</p></dd>


<dt id="arg-dec">dec<a class="anchor" aria-label="anchor" href="#arg-dec"></a></dt>
<dd><p>character, decimal separator (e.g., "." or "," depending on
locale) in the input file. Defaults to ".".</p></dd>


<dt id="arg-grp">grp<a class="anchor" aria-label="anchor" href="#arg-grp"></a></dt>
<dd><p>character, character used for digit grouping. It defaults
to <code>""</code> (i.e. no grouping).</p></dd>


<dt id="arg-id-quote-method">id_quote_method<a class="anchor" aria-label="anchor" href="#arg-id-quote-method"></a></dt>
<dd><p>character, used to specify how to build the SQLite
columns' names using the fields' identifiers read from the input file.
For details see the description of the <code>quote_method</code> parameter of
the <code><a href="format_column_names.html">format_column_names()</a></code> function. Defautls to <code>DB_NAMES</code>.</p></dd>


<dt id="arg-max-lines">max_lines<a class="anchor" aria-label="anchor" href="#arg-max-lines"></a></dt>
<dd><p>integer, number of lines (excluding the header) to be
read to infer columns' data types. Defaults to 2000.</p></dd>


<dt id="arg-null-columns">null_columns<a class="anchor" aria-label="anchor" href="#arg-null-columns"></a></dt>
<dd><p>logical, if <code>TRUE</code> the col_type of columuns consisting
only of NAs or zero-length strings will be marked as <code>"NULL"</code>, otherwise
they will be marked as <code>character</code>. Defaults to <code>FALSE</code></p></dd>


<dt id="arg-force-num-cols">force_num_cols<a class="anchor" aria-label="anchor" href="#arg-force-num-cols"></a></dt>
<dd><p>logical, if <code>TRUE</code> the returned schema will have
all rows with <code>n_cols</code> columns (i.e. the guessed number of columns
determined inspecting the first <code>max_lines</code> lines of the input file),
even if there are rows in the input file with fewer or greater columns
than <code>n_cols</code>.
If <code>FALSE</code> and any of the tested lines has a number of columns not
equal to <code>n_cols</code>, the function will return a list without the <code>schema</code>
element. It defaults to <code>TRUE</code>.</p></dd>


<dt id="arg--">...<a class="anchor" aria-label="anchor" href="#arg--"></a></dt>
<dd><p>Additional arguments for quoting and data interpretation as
described in the <code><a href="https://rdrr.io/r/base/scan.html" class="external-link">base::scan()</a></code> function. The parameters used
by <code>file_schema_dsv</code> are:</p><ul><li><p><code>quote</code>, character, the set of quoting characters. Defaults to <code>""</code>
(i.e., no quoting).</p></li>
<li><p><code>comment.char</code>, character, the comment character. Defaults to <code>""</code>
(i.e., no comments).</p></li>
<li><p><code>skip</code>, integer, the number of lines to skip before reading data.
Defaults to <code>0</code>.</p></li>
<li><p><code>fileEncoding</code>, character, the name of the encoding of the input file.
Defaults to <code>""</code>.</p></li>
<li><p><code>na.strings</code>, character vector, the strings to be interpreted as NAs.
Defaults to <code>c("NA")</code>.</p></li>
</ul></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p>a list with the following named elements:</p><ul><li><p><code>schema</code>, a data frame with these columns:</p><ul><li><p><code>col_names</code>: columns' names, after applying the selected quote method;</p></li>
<li><p><code>col_names_unquoted</code>: columns' names, unquoted; if <code>id_quote_method</code>
is set to <code>DB_NAMES</code> they will be the same as <code>col_names</code>; for other
quote methods they will be the unquoted versions of <code>col_names</code>,that
is generally the same as <code>src_names</code> unless <code>src_names</code> contain the
quoting characters;</p></li>
<li><p><code>col_types</code>: columns' R data types;</p></li>
<li><p><code>sql_types</code>: columns' SQLite data types;</p></li>
<li><p><code>src_names</code>: columns' names as they appear in the input file.</p></li>
<li><p><code>src_types</code>: defaults to <code>text</code> for all columns.</p></li>
<li><p><code>src_is_quoted</code>: logical vector indicating if each column has at least
one value enclosed in quotes.</p></li>
</ul></li>
<li><p><code>col_counts</code>, a data frame with these columns:</p><ul><li><p><code>num_col</code>: number of columns,</p></li>
<li><p><code>Freq</code>: number of rows (within <code>max_lines</code>) that have the number
of colums shown in <code>num_col</code>.</p></li>
</ul></li>
<li><p><code>n_cols</code>, integer, the number of columns selected for the file.</p></li>
<li><p><code>num_col</code>, a vector of integers of length <code>max_lines</code> with the
number of detected columns in each row tested.</p></li>
<li><p><code>col_fill</code>, logical, it is set to <code>TRUE</code> if there are lines with
less columns than <code>n_cols</code>.</p></li>
<li><p><code>col_flush</code>, logical, it is set to <code>TRUE</code> if there are lines with
more columns than <code>n_cols</code>.</p></li>
</ul></div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="kw">if</span> <span class="op">(</span><span class="cn">FALSE</span><span class="op">)</span> <span class="op">{</span> <span class="co"># \dontrun{</span></span></span>
<span class="r-in"><span><span class="fu">file_schema_dsv</span><span class="op">(</span><span class="st">"data.csv"</span>, sep<span class="op">=</span><span class="st">","</span>, dec<span class="op">=</span><span class="st">"."</span>, max_lines<span class="op">=</span><span class="fl">50</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu">file_schema_dsv</span><span class="op">(</span><span class="st">"euro.csv"</span>, sep<span class="op">=</span><span class="st">";"</span>, dec<span class="op">=</span><span class="st">","</span>, header<span class="op">=</span><span class="cn">FALSE</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">}</span> <span class="co"># }</span></span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Ludovico G. Beretta.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.2.0.</p>
</div>

    </footer></div>





  </body></html>

